<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hr.mapper.EngageSubjectsMapper">
    <sql id="EngageSubjects">
    	(sub_id,
    	first_kind_id,
    	first_kind_name,
    	second_kind_id,
    	second_kind_name,
    	register,
    	derivation,
    	content,
    	key_a,
    	key_b,
    	key_c,
    	key_d,
    	key_e,
    	correct_key,
    	changer)
    </sql>
	<insert id="insert" parameterType="com.hr.pojo.EngageSubjects">
		insert into engage_subjects <include refid="EngageSubjects"/> values
		(#{subId},#{firstKindId},#{firstKindName},#{secondKindId},#{secondKindName},
		#{register},#{derivation},#{content},#{keyA},#{keyB},#{keyC},#{keyD},#{keyE},#{correctKey},#{changer})
	</insert>
	<update id="update" parameterType="com.hr.pojo.EngageSubjects">
		update engage_subjects set first_kind_id=#{firstKindId},
		first_kind_name=#{firstKindName},second_kind_id=#{secondKindId},
    	second_kind_name=#{secondKindName},register=#{register},derivation=#{derivation},content=#{content},
    	key_a=#{keyA},key_b=#{keyB},key_c=#{keyC},key_d=#{keyD},key_e=#{keyE},
    	correct_key=#{correctKey},changer=#{changer} where sub_id=#{subId}
	</update>
	<select id="select" parameterType="String" resultType="com.hr.pojo.EngageSubjects">
		select * from engage_subjects
		<trim prefixOverrides="where" suffixOverrides="and">
			<if test="firstKindName != null">
				first_kind_id=#{firstKindId} and
			</if>
			<if test="keyWord != null">
				<bind name="keyWordOne" value="'%'+keyWord+'%'"/>
				content like #{keyWordOne} or register like #{keyWordOne} or derivation like #{keyWordOne} and
			</if>
			<if test="start != null &amp;&amp; end !=null">
				regist_time &gt; #{start} and regist_time &lt; #{end} and
			</if>
		</trim>
	</select>
</mapper>